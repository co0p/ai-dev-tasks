import{f as F,a as S,c as ie}from"../chunks/pcuE1vcW.js";import{i as $}from"../chunks/C7kaWN97.js";import{M as L,h as A,a3 as ve,b as G,G as oe,F as ce,t as M,S as ue,I as de,J as me,K as Q,O as z,f as H,a4 as pe,ab as _e,ac as he,c as ge,e as J,s as xe,ad as ee,ae as be,af as K,ag as W,ah as Ee,ai as we,aj as ye,r as ae,p as Ce,ak as B,a5 as ke,al as Ie,am as Te,an as Ae,d as Ne,y as re,C as E,E as N,D as b,A as te,k as V,v as Y,B as se,z as ne,U as Z}from"../chunks/Cx-O9e__.js";import{o as Me}from"../chunks/Ccub5v1K.js";import{s as O}from"../chunks/DNkSv5bp.js";import{p as De,i as Se}from"../chunks/Dy7oa_Pi.js";import{s as j}from"../chunks/DYZ96ZTr.js";function Re(e,r){return r}function Ue(e,r,a){for(var c=[],u=r.length,v=0;v<u;v++)Ie(r[v].e,c,!0);Te(c,()=>{var l=c.length===0&&a!==null;if(l){var s=a,i=s.parentNode;Ae(i),i.append(s),e.items.clear(),g(e,r[0].prev,r[u-1].next)}for(var t=0;t<u;t++){var n=r[t];l||(e.items.delete(n.k),g(e,n.prev,n.next)),Ne(n.e,!l)}e.first===r[0]&&(e.first=r[0].prev)})}function He(e,r,a,c,u,v=null){var l=e,s=new Map,i=null;{var t=e;l=A?L(ve(t)):t.appendChild(G())}A&&oe();var n=null,o=ue(()=>{var m=a();return be(m)?m:m==null?[]:ee(m)}),d,p=!0;function f(){Oe(I,d,l,r,c),n!==null&&(d.length===0?(n.fragment?(l.before(n.fragment),n.fragment=null):ae(n.effect),h.first=n.effect):Ce(n.effect,()=>{n=null}))}var h=ce(()=>{d=M(o);var m=d.length;let _=!1;if(A){var R=de(l)===me;R!==(m===0)&&(l=Q(),L(l),z(!1),_=!0)}for(var T=new Set,C=ge,w=null,D=xe(),y=0;y<m;y+=1){A&&H.nodeType===pe&&H.data===_e&&(l=H,_=!0,z(!1));var k=d[y],U=c(k,y),x=p?null:s.get(U);x?(he(x.v,k),x.i=y,D&&C.skipped_effects.delete(x.e)):(x=Fe(p?l:null,w,k,U,y,u,r,a),p&&(x.o=!0,w===null?i=x:w.next=x,w=x),s.set(U,x)),T.add(U)}if(m===0&&v&&!n)if(p)n={fragment:null,effect:J(()=>v(l))};else{var X=document.createDocumentFragment(),P=G();X.append(P),n={fragment:X,effect:J(()=>v(P))}}if(A&&m>0&&L(Q()),!p)if(D){for(const[le,fe]of s)T.has(le)||C.skipped_effects.add(fe.e);C.oncommit(f),C.ondiscard(()=>{})}else f();_&&z(!0),M(o)}),I={effect:h,items:s,first:i};p=!1,A&&(l=H)}function Oe(e,r,a,c,u){var v=r.length,l=e.items,s=e.first,i,t=null,n=[],o=[],d,p,f,h;for(h=0;h<v;h+=1){if(d=r[h],p=u(d,h),f=l.get(p),e.first??=f,!f.o){f.o=!0;var I=t?t.next:s;g(e,t,f),g(e,f,I),q(f,I,a),t=f,n=[],o=[],s=t.next;continue}if((f.e.f&B)!==0&&ae(f.e),f!==s){if(i!==void 0&&i.has(f)){if(n.length<o.length){var m=o[0],_;t=m.prev;var R=n[0],T=n[n.length-1];for(_=0;_<n.length;_+=1)q(n[_],m,a);for(_=0;_<o.length;_+=1)i.delete(o[_]);g(e,R.prev,T.next),g(e,t,R),g(e,T,m),s=m,t=T,h-=1,n=[],o=[]}else i.delete(f),q(f,s,a),g(e,f.prev,f.next),g(e,f,t===null?e.first:t.next),g(e,t,f),t=f;continue}for(n=[],o=[];s!==null&&s.k!==p;)(s.e.f&B)===0&&(i??=new Set).add(s),o.push(s),s=s.next;if(s===null)continue;f=s}n.push(f),t=f,s=f.next}let C=l.size>v;if(s!==null||i!==void 0){for(var w=i===void 0?[]:ee(i);s!==null;)(s.e.f&B)===0&&w.push(s),s=s.next;var D=w.length;if(C=l.size-D>v,D>0){var y=v===0?a:null;Ue(e,w,y)}}if(C)for(const k of l.values())k.o||(g(e,t,k),t=k);e.effect.last=t&&t.e}function Fe(e,r,a,c,u,v,l,s){var i=(l&we)!==0,t=(l&ye)===0,n=i?t?K(a,!1,!1):W(a):a,o=(l&Ee)===0?u:W(u),d={i:o,v:n,k:c,a:null,e:null,o:!1,prev:r,next:null};try{if(e===null){var p=document.createDocumentFragment();p.append(e=G())}return d.e=J(()=>v(e,n,o,s)),r!==null&&(r.next=d),d}finally{}}function q(e,r,a){for(var c=e.next?e.next.e.nodes_start:a,u=r?r.e.nodes_start:a,v=e.e.nodes_start;v!==null&&v!==c;){var l=ke(v);u.before(v),v=l}}function g(e,r,a){r===null?(e.first=a,e.effect.first=a&&a.e):(r.e.next&&(r.e.next.prev=null),r.next=a,r.e.next=a&&a.e),a!==null&&(a.e.prev&&(a.e.prev.next=null),a.prev=r,a.e.prev=r&&r.e)}async function Le(){const e=await fetch("http://localhost:8080/catalog");if(!e.ok)throw new Error("Failed to fetch catalog");return await e.json()}var ze=F('<div class="catalog-item flex items-center gap-4 p-4 bg-gray-50 rounded-lg shadow-sm"><img class="w-16 h-16 rounded-lg object-cover border border-gray-200"/> <div class="flex flex-col justify-center"><div class="font-semibold text-lg text-gray-800"> </div> <div class="text-xs text-gray-500 mt-1">Last used: <span class="font-medium"> </span></div> <div class="text-xs text-gray-500">By: <span class="font-medium"> </span></div></div></div>');function Be(e,r){re(r,!1);let a=De(r,"item",8);function c(m,_){return m??_}const u=c(a().lastUsed,"Never"),v=c(a().lastUser,"N/A");$();var l=ze(),s=E(l),i=N(s,2),t=E(i),n=E(t,!0);b(t);var o=N(t,2),d=N(E(o)),p=E(d,!0);b(d),b(o);var f=N(o,2),h=N(E(f)),I=E(h,!0);b(h),b(f),b(i),b(l),te(()=>{j(s,"src",(Y(a()),V(()=>a().image))),j(s,"alt",(Y(a()),V(()=>a().name))),O(n,(Y(a()),V(()=>a().name))),O(p,u),O(I,v)}),S(e,l),se()}var Ve=F('<div class="error"> </div>'),Ye=F('<div class="catalog-list max-w-md mx-auto mt-8 p-4 bg-white rounded shadow-md"><div class="flex flex-col gap-4"></div></div>');function qe(e,r){re(r,!1);let a=K([]),c=K("");Me(async()=>{try{Z(a,await Le())}catch{Z(c,"Could not load catalog data.")}}),$();var u=ie(),v=ne(u);{var l=i=>{var t=Ve(),n=E(t,!0);b(t),te(()=>O(n,M(c))),S(i,t)},s=i=>{var t=Ye(),n=E(t);He(n,5,()=>M(a),Re,(o,d)=>{Be(o,{get item(){return M(d)}})}),b(n),b(t),S(i,t)};Se(v,i=>{M(c)?i(l):i(s,!1)})}S(e,u),se()}var Ge=F('<h1 class="text-2xl font-bold mb-4">ShareIt Catalog</h1> <!>',1);function je(e){var r=Ge(),a=N(ne(r),2);qe(a,{}),S(e,r)}export{je as component};
