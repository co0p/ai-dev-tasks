
<p align="center">
	<picture>
		<source srcset="assets/4dc-logo-traced-dark.svg" media="(prefers-color-scheme: dark)">
		<img src="assets/4dc-logo-traced.svg" alt="4DC logo" width="96" />
	</picture>
</p>

<p align="center"><em>4DC - Prompt-driven workflow for incremental, evolutionary software development supported by AI.</em></p>

4DC is designed to **encode modern software engineering and DORA practices** into your day-to-day workflow:

- Small, frequent, and reversible changes.
- Mandatory design and testing before implementation.
- CI/CD and observability as first-class concerns.
- Continuous learning via structured “Improve” steps and ADRs.

## Downloading and Using 4DC Files

You can quickly copy the canonical prompts or template files for your own project using:

```sh
# Download a single file (example: constitution prompt)
wget https://raw.githubusercontent.com/co0p/4dc/main/create-constitution.prompt.md

# Download the whole repository
git clone https://github.com/co0p/4dc.git

# Add as a submodule
git submodule add https://github.com/co0p/4dc.git vendor/4dc
```

Copy the relevant `.prompt.md` files from the repo or submodule into your own project for reproducible, prompt-driven generation.

---

## Document Flow and Dependencies

The 4DC workflow enforces separation and clarity—a cascade of documents, each answering a specific question and informing the next:

| Phase        | Artifact                   | Focus (WHY/WHAT/HOW/DO/LEARN)  | Generated By Prompt               | Produces / Promotes                                                           | Informs                      |
|--------------|----------------------------|--------------------------------|----------------------------------|-------------------------------------------------------------------------------|------------------------------|
| Constitution | `CONSTITUTION.md`          | WHY                            | `create-constitution.prompt.md`  | Values & principles, constraints, delivery & operability expectations        | All subsequent phases        |
| Increment    | `increment.md`             | WHAT                           | `increment.prompt.md`            | Goal / hypothesis / PRD, small and testable increments                       | Design, Implement            |
| Design       | `design.md` (mandatory)    | HOW                            | `design.prompt.md`               | Technical approach & boundaries, test/CI/observability & rollout strategy    | Implement, Improve           |
| Implement    | Implementation plan        | DO                             | `implement.prompt.md`            | Task breakdown & execution guidance, tests and CI integration                | Improve                      |
| Improve / ADR| `improve.md`, `adr-*.md`   | LEARN                          | `improve.prompt.md`              | Lessons, refactors, operational improvements, ADR suggestions & records      | Next increments & designs    |

In XP terms, you can think of:

- **Increment** as the user story and acceptance criteria (WHAT).
- **Design** as the shared technical design for that story (HOW): components, responsibilities, contracts, and test strategy.
- **Implement** as the **task board** for that story (DO): a set of small, testable work items that realize the design without redefining it.
- **Improve** as the structured refactoring and learning pass (LEARN) that feeds new increments and ADRs.

## Prompt → Artifact Mapping

| Prompt File                          | Output Artifact(s)                               | Purpose                                                                                 |
|--------------------------------------|--------------------------------------------------|-----------------------------------------------------------------------------------------|
| `create-constitution.prompt.md`      | `CONSTITUTION.md`                                | Establish foundational values, principles and constraints (WHY)                        |
| `increment.prompt.md`                | `increment.md`                                   | Define feature scope / PRD / goal as a small, testable increment (WHAT)                |
| `design.prompt.md`                   | `design.md`                                      | Generate technical approach, boundaries, test and rollout strategy (HOW)               |
| `implement.prompt.md`                | Implementation plan (tasks/checklists)           | Break work into actionable steps, including tests and CI integration (DO)              |
| `improve.prompt.md`                  | `improve.md`, `adr-*.md`                         | Capture lessons, refactors, operational improvements, and record decisions (LEARN)     |

Design documents (`design.md`) are mandatory when using the 4DC prompts, but you may extend or refine them manually when additional architectural reasoning is needed before implementation.

All documents are generated/promoted by their corresponding prompt files in this repository.

---

## How 4DC Aligns with DORA Metrics

4DC encourages practices correlated with elite performance in the DORA research:

### Deployment Frequency & Lead Time for Changes

- Increments are intentionally **small** and scoped for **quick implementation**.
- Designs and implementation plans favor **trunk-based development** and **small PRs**.
- CI-friendly patterns (tests, linting, type checks) are baked into design and implementation templates.

### Change Failure Rate

- Every change is expected to come with **automated tests** and clear **acceptance criteria**.
- Design and implementation prompts ask for explicit **risk analysis** and **rollback strategies**.
- Improve prompts capture regressions and feed them back into **code, tests, design, and process**.

### Mean Time to Restore (MTTR)

- **Observability** (logging, metrics, diagnosability) is treated as a design concern, not an afterthought.
- Improve prompts encourage post-incident reflection and ADRs to make future recovery **faster and more predictable**.

By consistently running the loop:

```text
increment → design → implement → improve
```

and grounding each step in the project’s constitution (values & principles), 4DC helps teams evolve software in a way that is **incremental, observable, and continuously improving**.

---

## Quick Start (End-to-End Generation Sequence)

Generate a new feature or change by progressing through the mandatory prompts in order. Each step feeds prior artifacts back into the next prompt for contextual continuity.

1. Constitution (run once per project)
	```sh
	# Review / adapt the constitution prompt
	cat create-constitution.prompt.md
	# Feed to your LLM, save result as:
	# CONSTITUTION.md
	```
2. Increment (define goal / PRD)
	```sh
	cat increment.prompt.md
	# Provide goal, constraints, link back to CONSTITUTION.md
	# Save result as increment.md
	```
3. Design (mandatory technical approach)
	```sh
	cat design.prompt.md
	# Provide increment.md + CONSTITUTION.md as context
	# Save result as design.md
	```
4. Implement (execution plan)
	```sh
	cat implement.prompt.md
	# Provide design.md, increment.md, CONSTITUTION.md
	# Save plan as implement.md and execute tasks
	```
5. Improve (reflection + ADRs)
	```sh
	cat improve.prompt.md
	# Provide code diffs, implement.md, design.md
	# Save result as improve.md; extract any adr-* decisions
	```

### Minimal Loop for Subsequent Features

After the initial constitution:

```
increment → design → implement → improve
```

### Tips

- Always include prior artifacts (constitution, increment, design) when invoking the next prompt for maximal alignment.
- Keep ADR filenames consistent: `adr-short-title.md` in a dedicated docs or adr folder.
- If design changes mid-implementation, regenerate `design.md` (version it) before continuing.

---

## Examples

Explore working examples:

- [`examples/todo/`](examples/todo) — Minimal browser todo app.
- [`examples/epicsum/`](examples/epicsum) — Bash-based time tracking.
- [`examples/shareit/`](examples/shareit) — Svelte project setup.
- [`examples/pomodoro/`](examples/pomodoro) — Lightweight Golang pomodoro menu bar app.

Each example directory shows the real flow: from constitution, through increments and design, to implementation and improvement.

## References and Inspiration

4DC draws on work and ideas from:

- Martin Fowler (architecture, refactoring)
- Kent Beck (incremental development, TDD)
- Mary & Tom Poppendieck (Lean Software)
- Nicole Forsgren, Jez Humble, Gene Kim (DORA research, Accelerate)
- Robert C. Martin (Clean Architecture, separation of concerns)
- Michael Feathers, Rebecca Wirfs-Brock, Eric Evans, Sandi Metz, Dave Thomas & Andy Hunt
- Gherkin-style acceptance criteria, BDD

## Editing Prompts

Prompts live in repository folders such as `.prompt/` and `.github/prompts/`.

Usage (manual):

- Open a prompt file in VS Code or another editor (for example: `code .prompt/create-constitution.prompt.md`).
- Copy the prompt text into your preferred Chat or LLM interface when you want to run it.

### Generation

Each prompt has its corresponding folder of supporting artifacts under `/templates`.

### Template Files

- `persona` — describes the persona the prompt should impersonate.
- `process` — defines the process the LLM should follow.
- `output` — defines the structure of the output.
- `frontmatter` — gives context for IDE integration.
- `generate` — is the prompt to generate the final prompt.
- `interaction` — defines the interaction style and examples of questions.
- Additional files such as `values.md`, `principles.md`, `lenses.md` give more context, especially around DORA and Modern Software Engineering.